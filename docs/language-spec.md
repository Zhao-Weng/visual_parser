# Visual Language Specifications #

This visual language is a set of standardized JSON objects that represent the key visual elements of an element on a page. Examples can be found in the `example_outputs` folder.

**Table of Contentss**

1. [Terminology](#terminology)
* [Overview](#overview)
* [Measurements](#measurements)
  * [Offset](#offset)
  * [Size](#size)
  * [Content](#content)
* [Properties](#properties)
  * [Selector](#selector)
  * [Offsets](#offsets)
  * [Sizes](#sizes)
  * [Contents](#contents)
  * [Colors](#colors)
* [Advanced](#advanced)
* [FAQ](#faq)
* [Change Log](#changelog)

## Terminology ##

The following are terms I've made up, so if there is a preexisting term that would be better suited please make a pull-request with your reasoning.

**Anchor**: The selector of the element which the measurement is relative to.

**Default Anchors**: The page and viewport. They are always available, so all anchors will derive from these. These anchor UID's are reserved and shouldn't be used in selectors.

**Primary Element**: The element the description is ultimately describing.

**Intermediate Elements**: Elements that are defined for the sake of identifying the Primary Element.

## Overview ##

Every object has exactly 5 properties:

1. [Selector](#selector)
* [Offsets](#offsets)
* [Sizes](#sizes)
* [Contents](#contents)
* [Colors](#colors)

Every property is generated by the encoder EXCEPT for the selector, which is just to track which CSS selector input resulted in the object as the output. For the purpose of this project, selectors could effectively be replaced with UID's and the languages should still be descriptive enough to re-identify an element on the same page.

Properties may be measured with the following measurements:

1. [Offset](#offset)
* [Size](#size)
* [Content](#content)

All measurements must be relative to an anchor. For now, any properties may be undefined.


## Measurements ##

Measurements are the core of the language. They're always relative to an anchor.

### Offset

The offset defines a position relative to an anchor in terms of the top, left, bottom, or right side of this object and one of the anchor's sides. For example, this object's top side is adjacent to the anchor's bottom side. Only the respective pairs should be used as anchors though, so top-to-top and top-to-bottom are okay, but top-to-left is not.

A single offset can define between 1 and 4 possible measurements for each of the following:

* Top
* Right
* Bottom
* Right

Values are measured in percentages relative to the viewport's dimensions. Possible values are as follows, with corresponding percentages in bracket notation:

| Value    | % of Viewport |
|----------|---------------|
| Touching | [0-3]         |
| Adjacent | (3-10]        |
| Near     | (10-30]       |
| Far      | (30-100]      |
| Outside  | (100-inf]     |

**IMPORTANT**: There are two methods for defining an offset. If an element is unique on the page, use the first method. If the element can occur multiple times in a list or grid, use the second method.

#### Method 1: Unique Element

When an element can only appear once on the page, use this method. Examples of elements that tend to appear only once include: headers, footers, and elements with id attributes in the HTML.

##### Example

    {
      "anchor" : ".top-navbar",
      "top" : {
        "anchor-edge" : "bottom"
        "value" : "adjacent"
      }
    }

### Method 2: Repeating Elements

The value represents the location of the first element in the list or grid. To account for varied offsets of multiple elements, the language allows for recursively defined offsets. The anchor for `anchor-edge` is the last element that matched this description. To define a a grid or list, use the `repeat-X` attribute where `X` is an edge of the object. Once you define a repeat, it'll keep iterating through the list or grid as specified.

#### Example: Grid of Product Tiles in Container
When there can be multiple elements, the value represents the location of the first element in the list or grid. This example would be a grid, because more than one dimension is defined (top and right).

    {
      "anchor" : ".products-container",
      "top" : {
        "anchor-edge" : "top",
        "value" : "adjacent",
        "repeat-top" : {
          "anchor-edge" : "bottom",
          "value" : "touching"
        }
      },
      "left" : {
        "anchor-edge" : "left",
        "value" : "adjacent",
        "repeat-left" : {
          "anchor-edge" : "right",
          "value" : "touching"
        }
      }
    }

### Size

A measurement of size relative to an anchor. Most size anchors will be the viewport.

A single size can define between 1 and 2 possible measurements for each of the following:

* Height
* Width

Values are measured in percentages relative to the anchor as follows, with corresponding percentages in bracket notation:

| Value    | % of Anchor |
|----------|-------------|
| Tiny     | [0-3]       |
| Small    | (3-10]      |
| Medium   | (10-30]     |
| Large    | (30-50]     |
| X-Large  | (50-100]    |
| XX-Large | (100-inf]   |

#### Example

    {
      "anchor" : "viewport",
      "height" : "x-large",
      "width" : "x-large"
    }

### Content

A measurement of the frequency with which an an object contains an anchor

Values are frequencies of content with regards to the anchor as follows, with corresponding percentages in bracket notation:

| Value      | % of Contents |
|------------|------------------|
| Rarely     | (10 - 30]        |
| Seldom     | (30 - 50]        |
| Sometimes  | (50 - 70]        |
| Often      | (70 - 97]        |
| Always     | (97 - 100]       |

#### Example

    {
      "anchor" : ".product-tile",
      "value" : "always"
    }

## Properties ##

Every object has 5 properties. Properties shouldn't be `null`.

### Selector

The selector serves two purposes:

1. UID for other objects to reference
2. [Optional] Record what input CSS Selector resulted in the creation of this object.

#### Example

    {
      "selector" : ".products-container",

      ...
    }

### Offsets

A list of offsets relative to anchors.

#### Example

    {
      "selector" : ".products-container",
      "offsets" : [
        {
          "anchor" : "top-navbar",
          "top" : {
            "anchor-edge" : "bottom",
            "value" : "adjacent"
          }
        },
        {
          "anchor" : "left-navbar",
          "left" : {
            "anchor-edge" : "right",
            "value" : "touching"
          }
        }
      ],

      ...
    }

### Sizes

A list of sizes relative to anchors. In most cases, the anchor should be the viewport.

#### Example

    {
      "selector" : ".products-container",

      ...

      "sizes": [
        {
          "anchor" : "viewport",
          "width" : {
            "value" : "x-large"
          },
          "height" : {
            "value" : "x-large"
          }
        }
      ],

      ...
    }

### Contents

A list of contents that are contained by this object.

#### Example

    {
      "selector" : ".products-container",

      ...

      "contents" : [
        {
          "anchor" : ".product-tile",
          "value" : "always"
        }
      ],

      ...
    }

### Colors

Still researching an implementation.

#### Example

    Unavailable

## Advanced ##

* [Visual Grammar for Webpages](grammar.md)
* [Measurements of Description Quality](quality.md)

## FAQ ##

**Q:** Is there a single correct visual description of an element on a page?

**A:** No. Different descriptions may enable the end consumer to still correctly identify the element. However, there are ways to measure the quality of a description, as detailed in the [Measurements of Description Quality](quality.md).

## Change Log ##
**[11/23/15]** Measures of Quality

* Added page about measures of quality

**[11/10/15]** Consistency Changes

* Changed value of width and height in size to a string rather than an object with a "value" property. Updated examples accordingly.
* Renamed "Locations" to "Offsets", since that's what it really is
* Renamed "Content" to "Contents" to make it clearer that it is a collection of "Content" objects
